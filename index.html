<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        
        <!-- Set the title bar of the page -->
        <title>chardynamics.github.io</title>

        <!-- Set the background colour of the document -->
        <style>
            body {
              background: #0;
              color:#cccccc;
              margin: 0px;
              padding: 0px;
              border: 0px;
            }
            canvas {
              image-rendering: optimizeSpeed;
              -webkit-interpolation-mode: nearest-neighbor;
              -ms-touch-action: none;
              margin: 0px;
              padding: 0px;
              border: 0px;
            }
            .header {
              padding: 60px;
              text-align: center;
              background: #1abc9c;
              color: white;
              font-size: 30px;
            }
        </style>
    </head>

    <body>
        <div class="header">
        <h1>Armor</h1>
        <p>A fork of https://www.khanacademy.org/computer-programming/tonk/6572812416368640 by Elijah Lipscomb</p>
        </div>
        <canvas id="mycanvas"></canvas> 
        <h1>
    </body>
    
    <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
    <script>
        var programCode=function(processingInstance){with(processingInstance){size(1920,1080),frameRate(60),rectMode(CENTER),textFont(createFont("Arial Bold"));var keys=[],bSpeed=10,zspeed=.2,bullets=[],bx=[],by=[],ba=[],zx=[],zy=[],za=[],zc=100,bushes=[],zombies=[],brot=[],scene=0,fade=0,s=0,td=0,play=!1,level=1,d=1,money=0,fade=0,oppFade=255,time=1,angle=0,pulse=130,pulseS=1,paused=!1,armorDebug=!0,metalMode=!0,reloadTime=60,reloadTime2=60,timeAlpha=0,timeIsDark=!1,buttonIsPressed=!1,buttonHover=!1,initiatebulletUpgradeLogic=!1,waitTilReloadResets=!1,fadeIsDone=!1,optionsHover=!1,bushTrigger=!0,options={tree:!1,treeOn:1,respawn:!0,respawnOn:!1},health={h:490,max:490,upgradeCost:200},speed={speed:.75,cost:200,level:1},bulletReload={upgradeCost:400,level:1,reloadRate:5,max:!1,asyncwait:!1},c={x:0,y:0},car={x:200,y:200,s:0,rot:-90,acc:.1,gx:200,gy:200,grot:0,rightW:!1,leftW:!1,type:1,deaths:0},carMenu={x:300,y:350,s:0,rot:-90,acc:.1,gx:300,gy:350,grot:0},zombie=function(e,t){this.x=e,this.y=t,this.a=!0,this.d=!0,this.xv=0,this.yv=0,this.mx=random(1,3),this.r=0},bush=function(e,t){this.x=e,this.y=t},bullet=function(e,t){this.x=e,this.y=t,this.rot=0,this.rot=90-car.grot,this.a=!0};function keyPressed(){keys[keyCode]=!0}function keyReleased(){keys[keyCode]=!1}zombie.prototype.draw=function(){play&&(this.a?(pushMatrix(),translate(this.x+c.x,this.y+c.y),stroke(0,0,0,100),strokeWeight(3),line(0,0,-15,15),line(0,0,15,15),line(0,0,15,-15),line(0,0,-15,-15),noStroke(),fill(30,130,123),rect(0,0,10,30,3),fill(0,0,0),stroke(0,0,0),strokeWeight(1),ellipse(-15,15,7.5,7.5),ellipse(15,15,7.5,7.5),ellipse(15,-15,7.5,7.5),ellipse(-15,-15,7.5,7.5),fill(100,100,100,100),ellipse(-15,15,25,25),ellipse(15,15,25,25),ellipse(15,-15,25,25),ellipse(-15,-15,25,25),noStroke(),popMatrix(),1===level?(this.x+=this.xv,this.y+=this.yv):(this.x+=this.xv*level/4,this.y+=this.yv*level/4),this.x+c.x<car.x&&this.xv>-1&&(this.xv+=zspeed),this.x+c.x>car.x&&this.xv<1&&(this.xv-=zspeed),this.y+c.y<car.y&&this.yv>-1&&(this.yv+=zspeed),this.y+c.y>car.y&&this.yv<1&&(this.yv-=zspeed),this.xv>0&&(this.xv-=.05),this.xv<0&&(this.xv+=.05),this.yv>0&&(this.yv-=.05),this.yv<0&&(this.yv+=.05),this.xv>this.mx&&(this.xv=this.mx),this.xv<-this.mx&&(this.xv=-this.mx),this.yv>this.mx&&(this.yv=this.mx),this.yv<-this.mx&&(this.yv=-this.mx)):this.d&&(fill(255,0,0,100),ellipse(this.x+c.x,this.y+c.y,this.r,this.r),this.r+=10,this.r>80&&(this.d=!1)))},bush.prototype.draw=function(){pushMatrix(),translate(this.x+c.x,this.y+c.y);var e=getImage("cute/TreeUgly");scale(.44),image(e,0,0),popMatrix()},bullet.prototype.draw=function(){this.a&&(fill(255,0,0),pushMatrix(),translate(this.x,this.y),rotate(this.rot),fill(100,100,100,50),triangle(-7.5,9,7.5,0,-7.5,-9),fill(158,60,14),triangle(-4.5,3,10,0,-4.5,-3),popMatrix(),this.x+=cos(this.rot)*bSpeed,this.y+=sin(this.rot)*bSpeed)};var bulletDraw=function(e,t,s){pushMatrix(),scale(s),translate(e,t),fill(100,100,100,50),triangle(-7.5,9,7.5,0,-7.5,-9),fill(158,60,14),triangle(-4.5,3,10,0,-4.5,-3),popMatrix()},tankSpawn=function(e,t){e.grot=atan2(mouseX-e.x,mouseY-e.y),paused?(e.rightW=!1,e.leftW=!1):keyPressed&&("a"!=key&&"A"!=key||e.s>-2*speed.speed&&(e.rot-=3,e.rightW=!1,e.leftW=!0),"d"!=key&&"D"!=key||e.s>-2*speed.speed&&(e.rot+=3,e.rightW=!0,e.leftW=!1),"w"!=key&&"W"!=key||e.s<=3*speed.speed&&(e.s+=e.acc*speed.speed),"s"!=key&&"S"!=key||e.s>-1.5*speed.speed&&(e.s-=e.acc*speed.speed),"w"!=key&&"W"!=key&&"d"!=key&&"D"!=key&&e.s>=0*speed.speed&&(e.s-=.02*speed.speed),keyCode==LEFT&&e.s>-2*speed.speed&&(e.rot-=3,e.rightW=!1,e.leftW=!0),keyCode==RIGHT&&e.s>-2*speed.speed&&(e.rot+=3,e.rightW=!0,e.leftW=!1),keyCode==UP&&e.s<=3*speed.speed&&(e.s+=e.acc*speed.speed),keyCode==DOWN&&e.s>=-1.5*speed.speed&&(e.s-=e.acc*speed.speed),keyCode!=UP&&keyCode!=DOWN&&(e.s>=0*speed.speed?e.s-=.05*speed.speed:e.s<=0*speed.speed&&(e.s+=.05*speed.speed)),e.s===3*speed.speed?e.s=3*speed.speed:e.s===-3*speed.speed&&(e.s=3*speed.speed)),e.x+=cos(e.rot)*e.s,e.y+=sin(e.rot)*e.s,e.gx+=cos(e.rot)*e.s,e.gy+=sin(e.rot)*e.s,pushMatrix(),t&&(buttonHover||(mousePressed&&0===reloadTime&&(bullets.push(new bullet(car.x,car.y)),reloadTime=reloadTime2),keys[32]&&0===reloadTime&&(bullets.push(new bullet(car.x,car.y)),reloadTime=reloadTime2))),1===car.type?(noStroke(),translate(e.x,e.y),rotate(e.rot+90),fill(0,120,0),rect(0,0,20,40,5),fill(50),rect(-13,0,5,35,5),rect(12,0,5,35,5),popMatrix(),pushMatrix(),noStroke(),translate(e.gx,e.gy),rotate(-e.grot-180),fill(0,100,0),rect(0,0,15,15,5),rect(0,-10,5,20,0),popMatrix()):(pushMatrix(),translate(e.x,e.y),!1===e.rightW&&!0===e.leftW&&rotate(e.rot+86),!0===e.rightW&&!1===e.leftW&&rotate(e.rot+94),fill(50),rect(-12,-9,5,13,5),rect(12,-9,5,13,5),popMatrix(),pushMatrix(),translate(e.x,e.y),rotate(e.rot+90),fill(50),rect(-12,10,5,13,5),rect(12,10,5,13,5),fill(0,120,0),rect(0,0,20,40,5),popMatrix(),pushMatrix(),translate(e.x,e.y),rotate(-e.grot-180),fill(0,100,0),rect(0,0,15,15,5),rect(0,-10,5,20,0),popMatrix())},incapacitatedTank=function(e){paused=!0,e.s-=.1,e.s<0?e.s=0:e.s-=.1},preGame=function(){if(noStroke(),0===s){textAlign(LEFT,LEFT);var e=!1;fade<255?(angle+=3,fade+=2.5):(e=!0,s=1,fade=0),background(0,0,0),fill(255,255,255),textSize(250),text("D",25,220),text("P",315,220),textSize(40),text("ynamic",176,220),text("roductions",375,220),pushMatrix(),translate(5,-5),rect(100,140,30,15),triangle(110,120,140,140,110,140),triangle(110,160,140,140,110,140),popMatrix(),textSize(67),text("cubeRedux();",100,550),pushMatrix(),fill(-pulse,pulse,100-pulse),translate(300,375),rotate(angle),rect(0,0,150,150,25),popMatrix(),fill(255,255,255),textSize(100),textAlign(CENTER,CENTER),text("X",300,370),textAlign(LEFT,LEFT),fill(0,0,0,fade),rect(300,300,600,600),!0===e&&(fill(0,0,0),rect(300,300,600,600))}else 1===s?(textAlign(LEFT,LEFT),background(0,pulse,208),fill(225,242,114),rect(300,300,500,500,10),fill(43,255,0),rect(300,300,450,450,10),fill(255,255,255),textSize(100),text("Armor",100,175),fill(100,100,100,50),pushMatrix(),translate(455,140),scale(5),triangle(-7.5,9,10,0,-7.5,-9),fill(158,60,14),triangle(-4.5,3,10,0,-4.5,-3),popMatrix(),fill(221,255,0),rect(300,460,250,100,10),fill(255,255,255),fill(225,242,114),rect(300,300,410,190,10),fill(255,255,255),textAlign(CENTER,CENTER),textSize(20),text("Version 1.69.1\nNews:\n- Added an options screen\n\nTo Do:\n- Add another option for...\n- Optimization?\n- Classes like Battlefield\n- ???",300,300),textSize(80),text("Play",300,460),tankSpawn(carMenu,!1),carMenu.x>175&&carMenu.x<425&&carMenu.y>410&&carMenu.y<510&&!buttonHover?fade<255?(incapacitatedTank(carMenu),fill(0,0,0,fade),rect(300,300,600,600),fade+=2.5):(paused=!1,fill(0,0,0),rect(300,300,600,600),fade=0,fadeIsDone=!1,buttonHover=!0,s=2):buttonHover=!1,oppFade>0&&!fadeIsDone&&(fill(0,0,0,oppFade),rect(300,300,600,600),oppFade-=2.5),0===oppFade&&(fadeIsDone=!0,oppFade=255),carMenu.x<70&&(carMenu.x=70,carMenu.gx=70),carMenu.x>530&&(carMenu.x=530,carMenu.gx=530),carMenu.y<70&&(carMenu.y=70,carMenu.gy=70),carMenu.y>530&&(carMenu.y=530,carMenu.gy=530)):2===s&&(background(0,pulse,208),fill(225,242,114),rect(300,300,500,500,10),fill(43,255,0),rect(300,300,450,450,10),fill(255,255,255),fill(221,255,0),rect(300,140,250,100,10),rect(300,460,250,100,10),rect(130,300,90,200,10),rect(470,300,90,200,10),fill(225,242,114),rect(300,300,200,175,10),textAlign(CENTER,CENTER),options.tree&&options.respawn&&optionsHover&&(textSize(17.5),fill(255,255,255),text("Go over the buttons to\nsee all options and\nthe currently selected\noptions.",300,300)),fill(255,255,255),textFont(createFont("Arial")),textSize(70),3===options.treeOn?text("🌳\n❌",130,300):1===options.treeOn?text("🌳\n✔️",130,300):2===options.treeOn&&text("🌲",130,300),1===time?(textSize(80),text("☀️/🌕",300,140)):2===time?(textSize(80),text("🌕",300,140)):3===time&&(textSize(80),text("☀️",300,140)),textSize(70),options.respawnOn?text("🔁\n✔️",470,300):options.respawnOn||0!==car.deaths?text("🔁\n🔒",470,300):text("🔁\n❌",470,300),textFont(createFont("Arial Bold")),textSize(80),0===car.deaths?text("Play",300,460):(textSize(60),text("Resume",300,440),textSize(12.5),text("(if you'd like to restart, refresh or press\nthe restart button at the bottom)\nRespawns: "+car.deaths,300,484)),tankSpawn(carMenu,!1),carMenu.x>175&&carMenu.x<425&&carMenu.y>90&&carMenu.y<190?(1===time&&optionsHover&&(time=2,optionsHover=!1),2===time&&optionsHover&&(time=3,optionsHover=!1),3===time&&optionsHover&&(time=1,optionsHover=!1),1===time?(fill(255,255,255),rect(300,301,105,2.5)):2===time?(fill(255,255,255),rect(300,324,185,2.5)):3===time&&(fill(255,255,255),rect(300,348,175,2.5)),textSize(20),fill(255,255,255),text("Day / Night Cycle:\n☀️/🌕 - On\n🌕 - Moonlight Only\n☀️ - Sunlight Only",300,300)):optionsHover=!0,carMenu.x>175&&carMenu.x<425&&carMenu.y>410&&carMenu.y<510&&!buttonHover?fade<255?(incapacitatedTank(carMenu),fade+=2.5,fill(0,0,0,fade),rect(300,300,600,600)):(paused=!1,fill(0,0,0),rect(300,300,600,600),fadeIsDone=!1,fade=0,buttonHover=!0,scene=1):(carMenu.x<175||carMenu.x>425||carMenu.y<410||carMenu.y>510)&&(buttonHover=!1),carMenu.x>425&&carMenu.x<515&&carMenu.y>200&&carMenu.y<400?(options.respawnOn&&options.respawn&&(options.respawnOn=!1,options.respawn=!1),!options.respawnOn&&options.respawn&&(options.respawnOn=!0,options.respawn=!1)):options.respawn=!0,carMenu.x>85&&carMenu.x<175&&carMenu.y>200&&carMenu.y<400?(1===options.treeOn&&options.tree&&(options.treeOn=2,options.tree=!1),2===options.treeOn&&options.tree&&(options.treeOn=3,options.tree=!1),3===options.treeOn&&options.tree&&(options.treeOn=1,options.tree=!1),1===options.treeOn?(fill(255,255,255),rect(305,300,120,2.5)):2===options.treeOn?(fill(255,255,255),rect(300,322.5,165,2.5)):3===options.treeOn&&(fill(255,255,255),rect(300,348,140,2.5)),textSize(20),fill(255,255,255),text("Trees:\n🌳✔️ - Trees\n🌲 - Performance\n🌳❌ - Nothing",300,300)):options.tree=!0,oppFade>0&&!fadeIsDone&&(fill(0,0,0,oppFade),rect(300,300,600,600),oppFade-=2.5),0===oppFade&&(fadeIsDone=!0,oppFade=255),carMenu.x<70&&(carMenu.x=70,carMenu.gx=70),carMenu.x>530&&(carMenu.x=530,carMenu.gx=530),carMenu.y<70&&(carMenu.y=70,carMenu.gy=70),carMenu.y>530&&(carMenu.y=530,carMenu.gy=530))},zsp=function(e,t){zombies.push(new zombie(e,t))},rai=function(e,t){e.splice(t,1)},game=function(){if(angle+=3,(pulse-=pulseS)<0&&(pulseS=-1),pulse>250&&(pulseS=1),background(0,255,208),pushMatrix(),translate(c.x,c.y),fill(225,242,114),rect(0,0,2150,2150,175),fill(43,255,0),rect(0,0,2e3,2e3,100),popMatrix(),options.treeOn){bushes.length<100&&bushes.push(new bush(random(-1e3,1e3),random(-1e3,1e3)));for(var e=0;e<bushes.length;e++)bushes[e].draw()}zombies.length<zc-td&&zsp(random(-1e3,1e3),random(-1e3,1e3)),tankSpawn(car,!0);for(e=0;e<zombies.length;e++){zombies[e].draw(),zx[e]=zombies[e].x+c.x,zy[e]=zombies[e].y+c.y,za[e]=zombies[e].a,zombies[e].x+c.x-15<car.x&&zombies[e].x+c.x+15>car.x&&zombies[e].y-15+c.y<car.y&&zombies[e].y+c.y+15>car.y&&zombies[e].a&&!metalMode&&(health.h-=level);for(var t=0;t<bullets.length;t++)zombies[e].x+c.x-15<bx[t]&&zombies[e].x+c.x+15>bx[t]&&zombies[e].y-15+c.y<by[t]&&zombies[e].y+c.y+15>by[t]&&ba[t]&&(zombies[e].a=!1);health.h<0&&(car.deaths++,health.h=0,scene=0,carMenu.x=300,carMenu.y=350,carMenu.s=0,carMenu.rot=-90,carMenu.acc=.1,carMenu.gx=300,carMenu.gy=350,carMenu.grot=0),zombies[e].r>79&&(td++,money++,rai(zombies,e))}0===zombies.length&&(level++,health.h=health.max,zc+=10,td=0);for(e=0;e<bullets.length;e++){bullets[e].draw(),bx[e]=bullets[e].x,by[e]=bullets[e].y,ba[e]=bullets[e].a;for(t=0;t<zombies.length;t++)bullets[e].x>zx[t]-15&&bullets[e].x<zx[t]+15&&bullets[e].y>zy[t]-15&&bullets[e].y<zy[t]+15&&za[t]&&(bullets[e].a=!1);(bullets[e].x>width||bullets[e].x<0||bullets[e].y>height||bullets[e].y<0)&&rai(bullets,e)}pushMatrix(),noStroke(),translate(car.gx,car.gy),rotate(-car.grot-180),fill(0,100,0),rect(0,0,15,15,5),rect(0,-10,5,20,0),popMatrix(),car.x<150&&(car.x=150,car.gx=150,c.x+=car.s),car.x>width-150&&(car.x=width-150,car.gx=width-150,c.x-=car.s),car.y<150&&(car.y=150,car.gy=150,c.y+=car.s),car.y>height-150&&(car.y=height-150,car.gy=height-150,c.y-=car.s),c.x>1200&&(c.x=1200),c.x<-600&&(c.x=-600),c.y>1200&&(c.y=1200),c.y<-600&&(c.y=-600),reloadTime>0&&(reloadTime-bulletReload.reloadRate>=0?reloadTime-=bulletReload.reloadRate:reloadTime=0),fill(0,0,0,timeAlpha),rect(300,300,600,600),1===time?(timeAlpha<200&&!timeIsDark&&199===(timeAlpha+=.25)&&(timeIsDark=!0),timeIsDark&&0===(timeAlpha-=.25)&&(timeIsDark=!1)):2===time&&(fill(0,0,0,200),rect(300,300,600,600)),fill(0,0,0,100),rect(300,75,500,125),fill(255,0,pulse),rect(300,35,health.h/health.max*490,35),fill(100,pulse,100),rect(300,65,zombies.length/d,25),fill(pulse,100,200),rect(300,85,reloadTime/reloadTime2*490,15),zc/d>490&&d++,textAlign(CENTER,CENTER),waitTilReloadResets&&(bulletReload.reloadRate<60?bulletReload.reloadRate+=5:bulletReload.reloadRate=60,waitTilReloadResets=!1),money>bulletReload.upgradeCost&&!bulletReload.max&&waitTilReloadResets&&(60===bulletReload.reloadRate?(bulletReload.max=!0,bulletReload.level="MAX",bulletReload.upgradeCost="MAX"):bulletReload.level++,waitTilReloadResets=(bulletReload.reloadRate,!0),waitTilReloadResets=!1,money-=bulletReload.upgradeCost,bulletReload.upgradeCost+=200),fill(0,0,0),textSize(20),text("Level "+level,300,27.5),textSize(15),text("Drones",300,65),text("Health",300,45),textSize(10),text("Reload Time",300,85),noFill(),pushMatrix(),translate(30,4),stroke(0,0,0),strokeWeight(3),arc(230,115,30,30,150,325),stroke(255,255,255),ellipse(230,115,5,5),line(230,117.5,235,100.5),popMatrix(),noStroke(),bulletDraw(100,77.5,1.5),fill(0,255,0),textAlign(LEFT,LEFT),textSize(30),text("$"+money,55,125.5),fill(255,0,0),text(bulletReload.level,170,125.5),fill(0,0,0),text(speed.level,280,125.5),textSize(12.5),fill(255,255,255),textFont(createFont("Arial")),textSize(27.5),text("❤️",350,125),noStroke(),textFont(createFont("Arial Bold")),textSize(30),text(health.h,390,125.5),textAlign(CENTER,CENTER),textSize(20),mouseX>140&&mouseX<165&&mouseY>100&&mouseY<130?(buttonHover=!0,mousePressed&&(initiatebulletUpgradeLogic=!0,money<bulletReload.upgradeCost&&!bulletReload.max&&(fill(255,0,0,100),rect(300,300,600,600),fill(255,0,0),text("Not enough money!\nUpgrade cost to increase the reload rate by\n6 seconds is "+bulletReload.upgradeCost+" dollars for level "+bulletReload.level+".",300,300)))):buttonHover=!1,mouseX>243&&mouseX<274&&mouseY>102&&mouseY<128?(buttonHover=!0,mousePressed&&(money>speed.cost&&speed.speed<2&&(money-=speed.cost,speed.cost+=200,speed.level++,speed.speed<2?speed.speed+=.25:(speed.speed=2,speed.cost="MAX",speed.level="MAX")),money<speed.cost&&speed.speed<2&&(fill(255,0,0,100),rect(300,300,600,600),fill(255,0,0),text("Not enough money!\nUpgrade cost to increase speed by 15% is\n"+speed.cost+" dollars for level "+speed.level+".",300,300)))):buttonHover=!1,mouseX>353&&mouseX<383&&mouseY>105&&mouseY<131?(buttonHover=!0,mousePressed&&(money>health.upgradeCost&&health.max<999&&(money-=health.upgradeCost,health.upgradeCost+=300,health.h<999?health.max+=100:health.max=999),money<health.upgradeCost&&health.max<999&&(fill(255,0,0,100),rect(300,300,600,600),fill(255,0,0),text("Not enough money!\nUpgrade cost to increase the max health by\n100 points is "+health.upgradeCost+" dollars\nfor the current max health of "+health.max+".",300,300)))):buttonHover=!1,pushMatrix(),scale(.75),translate(625,155),rotate(car.rot+90),fill(0,120,0),rect(0,0,20,40,5),fill(50),rect(-13,0,5,35,5),rect(12,0,5,35,5),popMatrix(),pushMatrix(),scale(.75),translate(625,155),rotate(-car.grot-180),fill(0,100,0),rect(0,0,15,15,5),rect(0,-10,5,20,0),popMatrix(),oppFade>0&&!fadeIsDone&&(fill(0,0,0,oppFade),rect(300,300,600,600),oppFade-=2.5),0===oppFade&&(fadeIsDone=!0,oppFade=255),noStroke(),(fade-=5)<0&&(fade=0,play=!0),fill(0,0,0,fade),rect(300,300,600,600),angle+=3};draw=function(){(pulse-=pulseS)<125&&(pulseS=-.25),pulse>225&&(pulseS=.25),0===scene&&preGame(),1===scene&&game(),!0===armorDebug&&(textAlign(LEFT,LEFT),fill(255,0,0),textSize(20),text(mouseX+" mouseX",mouseX+7.5,mouseY),text(mouseY+" mouseY",mouseX+7.5,mouseY+15),println(carMenu.rotate),println(carMenu.grot))}}};
        // Get the canvas that ProcessingJS will use
        var canvas = document.getElementById("mycanvas"); 
        // Pass the function to ProcessingJS constructor
        var processingInstance = new Processing(canvas, programCode);
    </script>
</html>
